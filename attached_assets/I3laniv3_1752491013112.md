# [title:I3lani v3]Below is the workflow for the Telegram ad bot, covering the bot itself, advertisers, channel owners, and affiliates, with specific details on buying payments (using TON and Telegram Stars), withdrawals (using TON), and commissions (using TON).

---

### 1. Bot Workflow
The Telegram ad bot automates the process of connecting advertisers with channel owners and managing payments, withdrawals, and commissions.

- **Setup**: The bot is built using the `python-telegram-bot` library and stores data in a Replit Database.
- **Key Commands**:
  - `/addchannel`: Channel owners register their channels, and the bot verifies it has admin rights before storing channel details.
  - `/createad`: Advertisers submit ads with details like content, category, bid type (CPC or CPM), and bid amount.
  - `/stats`: Users (advertisers and channel owners) view performance metrics like views, clicks, and earnings.
- **Auction System**: Runs daily to match ads to channels based on category and bid amount.
- **Ad Posting**: Posts approved ads to channels with trackable links (for CPC ads).
- **Performance Tracking**: Records impressions and clicks, storing data for stats and revenue calculations.
- **Revenue Management**: Calculates earnings for channel owners (68% of ad revenue) and the platform, updating user balances.

---

### 2. Advertisers Workflow
Advertisers use the bot to create and pay for ads, track performance, and manage their campaigns.

- **Ad Creation**:
  - Use `/createad` to submit ad content, category, bid type (CPC or CPM), and bid amount.
- **Buying Payments**:
  - After submission, advertisers are prompted to pay using **TON** (The Open Network cryptocurrency) or **Telegram Stars** (Telegram’s in-app currency).
  - Payment is verified by the bot before the ad is marked as "pending."
- **Ad Approval**:
  - Admins review the ad and either approve or reject it.
  - Approved ads enter the auction system.
- **Ad Performance**:
  - Use `/stats` to monitor metrics like impressions, clicks, and total cost.

---

### 3. Channel Owners Workflow
Channel owners monetize their Telegram channels by registering them with the bot and hosting ads.

- **Channel Registration**:
  - Use `/addchannel` to register a channel and specify its category.
  - The bot confirms admin rights and adds it to the system.
- **Ad Posting**:
  - Ads matched via the auction are automatically posted to the channel.
- **Earnings**:
  - Channel owners earn **68% of the revenue** generated from ads posted in their channel.
- **Withdrawal**:
  - Earnings are accumulated in the channel owner’s balance.
  - Withdrawals are available via **TON** once the balance reaches **$50 or more**.
- **Performance Stats**:
  - Use `/stats` to view channel performance (e.g., impressions, clicks) and earnings.

---

### 4. Affiliates Workflow
Affiliates earn commissions by referring new users (advertisers or channel owners) to the platform.

- **Referral System**:
  - Affiliates receive a unique referral link or code to share with potential users.
- **Commission**:
  - Earn a commission (e.g., **5% of the referred user’s earnings or spending**) paid in **TON**.
  - For example:
    - If a referred advertiser spends $100, the affiliate earns $5 in TON.
    - If a referred channel owner earns $100, the affiliate earns $5 in TON.
- **Tracking**:
  - Referrals are tracked via the unique link or code, and commissions are credited to the affiliate’s balance.
- **Withdrawal**:
  - Affiliates can withdraw their commissions via **TON** once their balance meets the minimum threshold (e.g., $50).

---

### Payment and Withdrawal Summary
- **Buying Payments**:
  - Advertisers pay for ads using **TON** or **Telegram Stars**.
  - Payments are processed and verified before ads are activated.
- **Withdrawals**:
  - Channel owners and affiliates withdraw earnings/commissions via **TON**.
  - Minimum withdrawal threshold is **$50**.
- **Commissions**:
  - Affiliates earn commissions in **TON** based on the activity of their referred users.

---

This workflow ensures a streamlined experience for all users:
- Advertisers fund campaigns with TON or Telegram Stars.
- Channel owners earn and withdraw TON for hosting ads.
- Affiliates earn TON commissions for referrals.
- The bot manages everything from ad matching to payment processing.